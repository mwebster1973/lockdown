{"version":3,"sources":["components/Choice.tsx","components/YouChoose.tsx","components/EndModal.tsx","components/VideoPlayer.tsx","index.tsx"],"names":["Choice","props","handleClick","bind","this","onSelection","option","Button","key","text","variant","size","onClick","React","Component","YouChoose","choices","question","options","map","currentOption","Modal","show","fade","aria-labelledby","centered","Header","closeButton","Title","id","Body","description","Footer","EndModal","idx","decisions","title","header","className","VideoPlayer","state","currentVideo","videos","videoPlaying","items","Array","selectVideo","restartVideo","idToFind","find","video","changeState","next","nextVideo","findVideoById","routes","forEach","route","item","includes","setState","push","findVideoByQuestion","splice","indexOf","attribute","p","path","questionBar","end","Container","width","height","onEnded","clipEnd","autoPlay","controls","src","type","myVideos","ReactDOM","document","getElementById"],"mappings":"m6HAUaA,EAAb,kDAEE,WAAYC,GAAqB,IAAD,8BAC9B,cAAMA,IACDC,YAAc,EAAKA,YAAYC,KAAjB,gBAFW,EAFlC,0DAQMC,KAAKH,MAAMI,YAAYD,KAAKH,MAAMK,UARxC,+BAYM,OACE,6BACI,kBAACC,EAAA,EAAD,CAAQC,IAAKJ,KAAKH,MAAMK,OAAOG,KAAMC,QAAQ,UAAUC,KAAK,KAAKC,QAASR,KAAKF,aAAcE,KAAKH,MAAMK,OAAOG,WAd3H,GAA4BI,IAAMC,W,OCCrBC,EAAb,uKACY,IAAD,OACHC,EAA8BZ,KAAKH,MAAMgB,SAASC,QAAQC,KAC5D,SAACC,GACC,OAAO,kBAAC,EAAD,CAAQZ,IAAKY,EAAcX,KAAMH,OAAQc,EAAef,YAAa,EAAKJ,MAAMI,iBAG3F,OACE,kBAACgB,EAAA,EAAD,CACEC,MAAI,EACJC,KAAK,OACLZ,KAAK,KACLa,kBAAgB,gCAChBC,UAAQ,GACR,kBAACJ,EAAA,EAAMK,OAAP,CAAcC,aAAW,GACvB,kBAACN,EAAA,EAAMO,MAAP,CAAaC,GAAG,iCAAhB,eAIF,kBAACR,EAAA,EAAMS,KAAP,KACE,4BAAK1B,KAAKH,MAAMgB,SAASR,MACzB,2BAAIL,KAAKH,MAAMgB,SAASc,cAE1B,kBAACV,EAAA,EAAMW,OAAP,KACGhB,QAxBX,GAA+BH,IAAMC,W,QCExBmB,EAAb,kDACE,WAAYhC,GAAuB,IAAD,8BAChC,cAAMA,IACDC,YAAc,EAAKA,YAAYC,KAAjB,gBAFa,EADpC,wDAMc+B,GACV9B,KAAKH,MAAMI,YAAYD,KAAKH,MAAMkC,UAAUD,MAPhD,+BAUY,IAAD,OAEHlB,EAA8BZ,KAAKH,MAAMkC,UAAUhB,KACrD,SAACC,EAAec,GACd,OAAO,kBAAC3B,EAAA,EAAD,CAAQG,QAAQ,UAAUC,KAAK,KAAKH,IAAKY,EAAcX,KAAMG,QAAS,EAAKV,YAAYC,KAAK,EAAM+B,IAAOd,EAAcX,SAGlI,OACE,kBAACY,EAAA,EAAD,CACEC,MAAI,EACJX,KAAK,KACLa,kBAAgB,gCAChBC,UAAQ,GACR,kBAACJ,EAAA,EAAMK,OAAP,CAAcC,aAAW,GACvB,kBAACN,EAAA,EAAMO,MAAP,CAAaC,GAAG,iCACfzB,KAAKH,MAAMmC,QAGd,kBAACf,EAAA,EAAMS,KAAP,KACE,4BAAK1B,KAAKH,MAAMoC,OAAhB,KACA,2BAAIjC,KAAKH,MAAM8B,aACf,yBAAKO,UAAU,sBACXtB,SAhCd,GAA8BH,IAAMC,WCgCvByB,EAAb,kDAEE,WAAYtC,GAAoB,IAAD,8BAC7B,cAAMA,IACDuC,MAAQ,CACXC,aAAc,EAAKxC,MAAMyC,OAAO,GAChCC,cAAc,EACdC,MAAO,IAAIC,MACXV,UAAW,IAAIU,OAEjB,EAAKC,YAAc,EAAKA,YAAY3C,KAAjB,gBACnB,EAAK4C,aAAe,EAAKA,aAAa5C,KAAlB,gBATS,EAFjC,0DAcgBuC,EAAsBM,GAClC,OAAON,EAAOO,MAAK,SAACC,GAAmB,OAAOA,EAAMrB,KAAOmB,OAf/D,0CAkBsBN,EAAsBzB,GACxC,OAAOyB,EAAOO,MAAK,SAACC,GAAmB,OAAOA,EAAMjC,WAAaA,OAnBrE,gCAyBa,IAAD,OACFkC,EAAW,eAAQ/C,KAAKoC,OAC9B,GAAIpC,KAAKoC,MAAMC,aAAaW,KAAM,CAChC,IAAIC,EAAYjD,KAAKkD,cAAclD,KAAKH,MAAMyC,OAAQtC,KAAKoC,MAAMC,aAAaW,MAC1EC,IACEA,EAAUE,QACZF,EAAUE,OAAOC,SAAS,SAACC,GACnBA,EAAMC,MAAQD,EAAML,MAAQD,EAAYP,MAAMe,SAASF,EAAMC,QAC/DL,EAAY,EAAKC,cAAc,EAAKrD,MAAMyC,OAAQe,EAAML,UAIhED,EAAYV,aAAeY,EAC3BF,EAAYR,cAAe,QAG7BQ,EAAYR,cAAe,EAE7BvC,KAAKwD,SAAST,KA3ClB,kCA8Cc7C,GACV,IAAM6C,EAAW,eAAQ/C,KAAKoC,OAC1Ba,EAAYjD,KAAKkD,cAAclD,KAAKH,MAAMyC,OAAQpC,EAAO8C,MACzDC,IAEFF,EAAYV,aAAeY,EAC3BF,EAAYR,cAAe,EACvBrC,EAAOoD,MACTP,EAAYP,MAAMiB,KAAKvD,EAAOoD,MAE5BtD,KAAKoC,MAAMC,aAAaxB,UAC1BkC,EAAYhB,UAAU0B,KAAKzD,KAAKoC,MAAMC,aAAaxB,WAGvDb,KAAKwD,SAAST,KA5DlB,mCA+De7C,GACX,IAAM6C,EAAW,eAAQ/C,KAAKoC,OACxBa,EAAYjD,KAAK0D,oBAAoB1D,KAAKH,MAAMyC,OAAQpC,GAC1D+C,IACFF,EAAYV,aAAeY,EAC3BF,EAAYR,cAAe,EAC3BQ,EAAYhB,UAAU4B,OAAOZ,EAAYhB,UAAU6B,QAAQ1D,GAAS,KAChE+C,EAAUY,YAEZd,EAAYP,MAAQ,IAAIC,QAG5BzC,KAAKwD,SAAST,KA3ElB,+BA+EG,IAAIe,EAAI,oBAAsB9D,KAAKoC,MAAMC,aAAa0B,KAAO,OAExDC,EAA2B,2BAW/B,OATKhE,KAAKoC,MAAMG,eAEZyB,EADEhE,KAAKoC,MAAMC,aAAaxB,SACZ,gBAAC,EAAD,CAAWA,SAAUb,KAAKoC,MAAMC,aAAaxB,SAAUZ,YAAaD,KAAK0C,cAC9E1C,KAAKoC,MAAMC,aAAa4B,IACnB,gBAAC,EAAD,CAAUjC,MAAM,aAAaC,OAAO,wBAAwBN,YAAY,iDAAiDI,UAAW/B,KAAKoC,MAAML,UAAW9B,YAAaD,KAAK2C,eAE5K,gBAAC,EAAD,CAAUX,MAAM,SAASC,OAAO,8BAA8BN,YAAY,qEAAqEI,UAAW/B,KAAKoC,MAAML,UAAW9B,YAAaD,KAAK2C,gBAIlN,gBAACuB,EAAA,EAAD,CAAWhC,UAAU,OACnB,uBAAKA,UAAU,2CACb,yBAAOA,UAAU,wBAAwB9B,IAAK0D,EAAGK,MAAM,OAAOC,OAAO,MAAMC,QAASrE,KAAKsE,QAAQvE,KAAKC,MACpGuE,UAAQ,EAACC,UAAQ,GACjB,0BAAQC,IAAKX,EAAGY,KAAK,cAFvB,YAKDV,QApGT,GAAiCvD,aCvC3BkE,EAA0BrC,IAEhCsC,SACE,gBAAC,EAAD,CAAatC,OAAQqC,IACrBE,SAASC,eAAe,c","file":"static/js/main.07503750.chunk.js","sourcesContent":["import React from \"react\";\r\nimport { Option } from \"./VideoPlayer\";\r\nimport Button from 'react-bootstrap/Button';\r\n\r\n\r\nexport interface ChoiceProps {\r\n    option: Option;\r\n    onSelection : (option : Option)=> void;\r\n  }\r\n  \r\nexport class Choice extends React.Component<ChoiceProps, {}> {\r\n\r\n  constructor(props :ChoiceProps) {\r\n    super(props);\r\n    this.handleClick = this.handleClick.bind(this);\r\n  }\r\n    \r\n    handleClick() {\r\n      this.props.onSelection(this.props.option);\r\n    }\r\n    \r\n    render () {\r\n      return (\r\n        <div>\r\n            <Button key={this.props.option.text} variant=\"primary\" size=\"lg\" onClick={this.handleClick}>{this.props.option.text}</Button>\r\n        </div>\r\n      )\r\n    }\r\n  }","import { Question } from \"./VideoPlayer\";\r\nimport { Option } from \"./VideoPlayer\";\r\nimport { Choice } from \"./Choice\";\r\nimport React from \"react\";\r\nimport Modal from 'react-bootstrap/Modal';\r\n\r\nexport interface YouChooseProps {\r\n  question: Question;\r\n  onSelection: (option: Option) => void;\r\n}\r\n\r\nexport class YouChoose extends React.Component<YouChooseProps, {}> {\r\n  render() {\r\n    var choices: Array<JSX.Element> = this.props.question.options.map(\r\n      (currentOption): JSX.Element => {\r\n        return <Choice key={currentOption.text} option={currentOption} onSelection={this.props.onSelection} />\r\n      });\r\n\r\n    return (\r\n      <Modal\r\n        show\r\n        fade=\"true\"\r\n        size=\"lg\"\r\n        aria-labelledby=\"contained-modal-title-vcenter\"\r\n        centered>\r\n        <Modal.Header closeButton>\r\n          <Modal.Title id=\"contained-modal-title-vcenter\">\r\n          You Decide\r\n        </Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body>\r\n          <h4>{this.props.question.text}</h4>\r\n          <p>{this.props.question.description}</p>\r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n          {choices}\r\n        </Modal.Footer>\r\n      </Modal>\r\n    )\r\n  }\r\n}","import { Question } from \"./VideoPlayer\";\r\nimport React from \"react\";\r\nimport Modal from 'react-bootstrap/Modal';\r\nimport Button from \"react-bootstrap/Button\";\r\n\r\nexport interface EndModalProps {\r\n  decisions: Array<Question>;\r\n  title : string;\r\n  header : string;\r\n  description : string;\r\n  onSelection: (option: Question) => void;\r\n}\r\n\r\nexport class EndModal extends React.Component<EndModalProps, {}> {\r\n  constructor(props :EndModalProps) {\r\n    super(props);\r\n    this.handleClick = this.handleClick.bind(this);\r\n  }\r\n\r\n  handleClick(idx: number) {\r\n    this.props.onSelection(this.props.decisions[idx]);\r\n  }\r\n\r\n  render() {\r\n\r\n    var choices: Array<JSX.Element> = this.props.decisions.map(\r\n      (currentOption, idx): JSX.Element => {\r\n        return <Button variant=\"primary\" size=\"lg\" key={currentOption.text} onClick={this.handleClick.bind(this, idx)}>{currentOption.text}</Button>\r\n      });\r\n\r\n    return (\r\n      <Modal\r\n        show\r\n        size=\"lg\"\r\n        aria-labelledby=\"contained-modal-title-vcenter\"\r\n        centered>\r\n        <Modal.Header closeButton>\r\n          <Modal.Title id=\"contained-modal-title-vcenter\">\r\n          {this.props.title} \r\n        </Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body>\r\n          <h4>{this.props.header} </h4>\r\n          <p>{this.props.description}</p>\r\n          <div className=\"btn-group-vertical\">\r\n             {choices}\r\n          </div>\r\n        </Modal.Body>\r\n      </Modal>\r\n    )\r\n  }\r\n}","import * as React from \"react\";\r\nimport { YouChoose } from \"./YouChoose\";\r\n\r\nimport Container from 'react-bootstrap/Container';\r\nimport { EndModal } from \"./EndModal\";\r\n\r\nexport interface VideoProps {\r\n  videos: Array<Video>;\r\n}\r\n\r\ninterface VideoState {\r\n  currentVideo: Video;\r\n  videoPlaying: boolean;\r\n  items: Array<string>;\r\n  decisions: Array<Question>;\r\n}\r\n\r\nexport interface Video {\r\n  id: number;\r\n  name: string;\r\n  path?: string;\r\n  next?: number;\r\n  question?: Question;\r\n  routes? : Array<Route>, \r\n  attribute? : string;\r\n  end? : boolean;\r\n}\r\n\r\nexport interface Route {\r\n  item?: string;\r\n  next?: number;\r\n}\r\n\r\nexport interface Question {\r\n  text: string;\r\n  description: string;\r\n  options: Array<Option>\r\n}\r\n\r\nexport interface Option {\r\n  text: string;\r\n  item?: string;\r\n  next: number, \r\n}\r\n\r\nexport class VideoPlayer extends React.Component<VideoProps, VideoState> {\r\n\r\n  constructor(props: VideoProps) {\r\n    super(props);\r\n    this.state = {\r\n      currentVideo: this.props.videos[0],\r\n      videoPlaying: true,\r\n      items: new Array<string>(),\r\n      decisions: new Array<Question>()\r\n    }\r\n    this.selectVideo = this.selectVideo.bind(this);\r\n    this.restartVideo = this.restartVideo.bind(this);\r\n  }\r\n\r\n  findVideoById(videos: Array<Video>, idToFind: number): Video | undefined {\r\n    return videos.find((video: Video) => { return video.id === idToFind })\r\n  }\r\n\r\n  findVideoByQuestion(videos: Array<Video>, question: Question): Video | undefined {\r\n    return videos.find((video: Video) => { return video.question === question })\r\n  }\r\n\r\n  /**\r\n   * When a clip ends, if there is another video then just play that video\r\n   */\r\n  clipEnd() {\r\n    const changeState = { ...this.state }\r\n    if (this.state.currentVideo.next) {\r\n      let nextVideo = this.findVideoById(this.props.videos, this.state.currentVideo.next);\r\n      if (nextVideo) {\r\n        if (nextVideo.routes) {\r\n          nextVideo.routes.forEach( (route:Route) =>{\r\n              if (route.item && route.next && changeState.items.includes(route.item)){\r\n                nextVideo = this.findVideoById(this.props.videos, route.next);\r\n              }\r\n          });\r\n        }\r\n        changeState.currentVideo = nextVideo;\r\n        changeState.videoPlaying = true;\r\n      }\r\n    } else {\r\n      changeState.videoPlaying = false;\r\n    }\r\n    this.setState(changeState);\r\n  }\r\n\r\n  selectVideo(option: Option) {\r\n    const changeState = { ...this.state }\r\n    let nextVideo = this.findVideoById(this.props.videos, option.next);\r\n    if (nextVideo) {\r\n\r\n      changeState.currentVideo = nextVideo;\r\n      changeState.videoPlaying = true;\r\n      if (option.item) {\r\n        changeState.items.push(option.item);\r\n      }\r\n      if (this.state.currentVideo.question){\r\n        changeState.decisions.push(this.state.currentVideo.question)\r\n      }\r\n    }\r\n    this.setState(changeState);\r\n  }\r\n\r\n  restartVideo(option: Question) {\r\n    const changeState = { ...this.state }\r\n    const nextVideo = this.findVideoByQuestion(this.props.videos, option);\r\n    if (nextVideo) {\r\n      changeState.currentVideo = nextVideo;\r\n      changeState.videoPlaying = true;\r\n      changeState.decisions.splice(changeState.decisions.indexOf(option), 9e9);\r\n      if (nextVideo.attribute){\r\n        // wipes out previous item\r\n        changeState.items = new Array<string>();\r\n      }\r\n    }\r\n    this.setState(changeState);\r\n  }\r\n\r\n  render() {\r\n   var p = \"/lockdown/videos/\" + this.state.currentVideo.path + \".mp4\";\r\n\r\n    var questionBar: JSX.Element = <br />;\r\n\r\n    if (!this.state.videoPlaying) {\r\n      if (this.state.currentVideo.question){\r\n        questionBar = <YouChoose question={this.state.currentVideo.question} onSelection={this.selectVideo} />\r\n      } else if (this.state.currentVideo.end){\r\n        questionBar = <EndModal title=\"You did it\" header=\"You survived lockdown\" description=\"If you want to start from a previous decision.\" decisions={this.state.decisions} onSelection={this.restartVideo} />  \r\n      } else{\r\n        questionBar = <EndModal title=\"Oh No.\" header=\"You didn't survive lockdown\" description=\"Maybe you would like to try again, and revise a decision you made.\" decisions={this.state.decisions} onSelection={this.restartVideo} />\r\n      }\r\n    }\r\n    return (\r\n      <Container className=\"p-3\">\r\n        <div className=\"embed-responsive embed-responsive-16by9\">\r\n          <video className=\"embed-responsive-item\" key={p} width=\"1100\" height=\"650\" onEnded={this.clipEnd.bind(this)}\r\n            autoPlay controls>\r\n            <source src={p} type=\"video/mp4\" />\r\n          No video\r\n        </video>\r\n        {questionBar}\r\n        </div>\r\n      </Container>\r\n    )\r\n  }\r\n}","import * as React from \"react\";\r\nimport * as ReactDOM from \"react-dom\";\r\nimport { videos} from \"./videos.json\"\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport { VideoPlayer, Video } from \"./components/VideoPlayer\";\r\n\r\nconst myVideos : Array<Video> = videos;\r\n\r\nReactDOM.render(\r\n  <VideoPlayer videos={myVideos}/>,\r\n  document.getElementById(\"example\")\r\n);"],"sourceRoot":""}